@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<button onclick="getEvents()">Get events</button>
<button onclick="addEventByReference()">Add event</button>

<script>
    function getEvents() {
        $.ajax({            
            type: "get",
            url: "http://localhost:1697/api/events",
            contentType: "application/json; charset=utf-8",
            xhrFields: {
                withCredentials: true
            },
            success: function (data) {
                alert(JSON.stringify(data));
            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert(jqXHR.responseText || textStatus);
            }
        });
    }

    function addEventByReference() {
        var event = "{'name': 'eventbyref', 'text': 'event description', 'place': 'myplace'}";
        $.post("http://localhost:1697/api/events", function (res) {
  if(res.Success)
    {
    window.location.href=res.RedirectUrl;
    }
    }); 
        $.ajax({
            type: "post",
            url: "http://localhost:1697/api/events",
            contentType: "application/json; charset=utf-8",
            data: event,
            xhrFields: {
                withCredentials: true
            },           
            success: function (res) {
                window.location.href = res.RedirectUrl;
            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert(jqXHR.responseText || textStatus);
            }
        });       
    }
</script>
